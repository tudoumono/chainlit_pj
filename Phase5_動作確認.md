# Phase 5 動作確認チェックリスト

## Phase 5の概要
**セッション永続化の強化**：会話の検索、再開、タグ管理などの高度なセッション管理機能

## 新機能・更新内容
- 会話の自動再開機能
- セッション検索機能
- タグ管理システム
- 最近のセッション表示
- エクスポート機能（簡易版）
- コンテキスト管理の改善

## 起動と基本確認

### 1. アプリケーション起動
```bash
uv run chainlit run app.py
```

### 2. 初期画面の確認
- [ ] Version: 0.5.0 (Phase 5) が表示される
- [ ] 最近のセッションが自動表示される（ある場合）
- [ ] 今日のセッションがある場合、自動再開の提案

## 新コマンドのテスト

### `/search [キーワード]` - セッション検索
- [ ] いくつかセッションを作成（異なるタイトル）
- [ ] `/search Python` でPython関連のセッションを検索
- [ ] 検索結果が正しく表示される
- [ ] 該当なしの場合、適切なメッセージが表示される

### `/recent` - 最近のセッション表示
- [ ] `/recent` コマンドを実行
- [ ] 最新5件のセッションが表示される
- [ ] メッセージ数、タグ、更新日時が表示される
- [ ] 現在のセッションに⭐マークが付く

### `/resume` - 最後のセッションを再開
- [ ] 新しいセッションを開始（`/clear`）
- [ ] `/resume` で前のセッションに戻る
- [ ] 過去のメッセージが表示される
- [ ] 設定（モデル、システムプロンプト）が復元される

### `/tag [タグ名]` - タグ管理
- [ ] `/tag 重要` でタグを追加
- [ ] `/tag` （引数なし）で現在のタグ一覧を表示
- [ ] 複数のタグを追加できる
- [ ] 重複するタグは追加されない
- [ ] `/search` でタグも検索対象になる

### `/export` - エクスポート機能
- [ ] `/export` コマンドを実行
- [ ] JSON形式でセッション情報が表示される
- [ ] メッセージ履歴が含まれる
- [ ] 統計情報が含まれる

## 自動機能のテスト

### セッションの自動再開
- [ ] アプリを再起動
- [ ] 今日の未完了セッション（メッセージ10件未満）が自動再開される
- [ ] または新しいセッションが作成される

### コンテキスト管理
- [ ] 20メッセージ以上の長い会話を作成
- [ ] 古いメッセージが適切に管理される
- [ ] 最新20メッセージが保持される

### タイトル自動生成（Phase 4から継承）
- [ ] 新セッションで最初のメッセージ送信
- [ ] タイトルが自動生成される
- [ ] `/recent` でタイトルが更新されている

## セッション永続化の確認

### データの永続性
- [ ] セッションにタグを追加
- [ ] システムプロンプトを設定
- [ ] モデルを変更
- [ ] アプリを再起動
- [ ] `/resume` ですべての設定が復元される

### 検索機能の精度
- [ ] タイトルでの検索が機能する
- [ ] タグでの検索が機能する
- [ ] 部分一致で検索できる
- [ ] 大文字小文字を区別しない

## 統計機能の拡張

### `/stats` - 統計表示
- [ ] タグ統計が表示される
- [ ] 人気タグTop5が表示される
- [ ] セッション統計が正確

## エラーハンドリング

### 不正な操作
- [ ] 存在しないセッションIDで`/session`
- [ ] 空のキーワードで`/search`
- [ ] セッションなしで`/tag`追加

## パフォーマンステスト

### 大量データの処理
- [ ] 50以上のセッションがある状態で`/search`
- [ ] 100以上のメッセージがあるセッションの読み込み
- [ ] 複数タグの同時管理

## コマンド一覧（Phase 5追加分）

| コマンド | 説明 | 例 |
|---------|------|-----|
| `/search` | セッション検索 | `/search Python` |
| `/recent` | 最近のセッション表示 | `/recent` |
| `/resume` | 最後のセッション再開 | `/resume` |
| `/tag` | タグ管理 | `/tag 重要` |
| `/export` | セッションエクスポート | `/export` |

## Phase 5 完了基準

以下がすべて確認できたら完了：
- ✅ セッション検索が機能する
- ✅ タグによる分類ができる
- ✅ セッションの自動再開が動作する
- ✅ 最近のセッションが表示される
- ✅ エクスポート機能が動作する
- ✅ すべての設定が永続化される
- ✅ コンテキスト管理が適切
- ✅ 統計情報が拡張されている

## 使用シナリオ例

### 学習ノートとしての活用
```
1. Python学習セッション作成
   /clear
   /tag Python
   /tag 学習
   Pythonのデコレータについて教えて

2. 別のトピックを学習
   /clear
   /tag JavaScript
   /tag 学習
   JavaScriptのPromiseについて教えて

3. 後日、Python学習を再開
   /search Python
   /session [ID]
   （前回の続きから学習）
```

### プロジェクト管理
```
1. プロジェクトごとにタグ付け
   /tag プロジェクトA
   /tag 仕様検討

2. 進捗確認
   /search プロジェクトA
   /recent

3. エクスポートして共有
   /export
```

## 次のステップ

Phase 6（高度な設定機能）に進む：
- ペルソナ機能の本格実装
- プリセット管理
- カスタムプロンプトテンプレート